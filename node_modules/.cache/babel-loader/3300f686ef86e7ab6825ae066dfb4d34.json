{"remainingRequest":"C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\src\\views\\Checkout.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\src\\views\\Checkout.vue","mtime":1639734230985},{"path":"C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\babel.config.js","mtime":1639407464051},{"path":"C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639407449155},{"path":"C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1639407451825},{"path":"C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639407449155},{"path":"C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1639407452380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2hlY2tvdXQiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXJ0OiB7CiAgICAgICAgaXRlbXM6IFtdCiAgICAgIH0sCiAgICAgIHN0cmlwZToge30sCiAgICAgIGNhcmQ6IHt9LAogICAgICBmaXJzdF9uYW1lOiAiIiwKICAgICAgbGFzdF9uYW1lOiAiIiwKICAgICAgZW1haWw6ICIiLAogICAgICBwaG9uZTogIiIsCiAgICAgIGFkcmVzczogIiIsCiAgICAgIHppcGNvZGU6ICIiLAogICAgICBwbGFjZTogIiIsCiAgICAgIGVycm9yczogW10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgZG9jdW1lbnQudGl0bGUgPSAiU2UgRGlnaXRhbGlzZXIgfCBQYWllbWVudCI7CiAgICB0aGlzLmNhcnQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jYXJ0OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0SXRlbVRvdGFsOiBmdW5jdGlvbiBnZXRJdGVtVG90YWwoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5xdWFudGl0eSAqIGl0ZW0ucHJvZHVjdC5wcmljZTsKICAgIH0sCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB0aGlzLmVycm9ycyA9IFtdOwoKICAgICAgaWYgKHRoaXMuZmlyc3RfbmFtZSA9PT0gIiIpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCJMZSBub20gZG9pdCDDqnRyZSByZW1wbGkiKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubGFzdF9uYW1lID09PSAiIikgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goIkxlIHByw6lub20gZG9pdCDDqnRyZSByZW1wbGkiKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZW1haWwgPT09ICIiKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCgiTCdlbWFpbCBkb2l0IMOqdHJlIHJlbXBsaSIpOwogICAgICB9CgogICAgICBpZiAodGhpcy5waG9uZSA9PT0gIiIpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCJMZSBudW3DqXJvIGRlIHTDqWzDqXBob25lIGRvaXQgw6p0cmUgcmVtcGxpIik7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFkcmVzcyA9PT0gIiIpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCJMJ2FkcmVzc2UgZG9pdCDDqnRyZSByZW5zZWlnbsOpZSIpOwogICAgICB9CgogICAgICBpZiAodGhpcy56aXBjb2RlID09PSAiIikgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goIkxlIHppcCBjb2RlIGRvaXQgw6p0cmUgcmVuc2VpZ27DqSIpOwogICAgICB9CgogICAgICBpZiAodGhpcy5wbGFjZSA9PT0gIiIpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKCJMYSB2aWxsZSBkb2l0IMOqdHJlIHJlbnNlaWduw6llIik7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjYXJ0VG90YWxMZW5naHQ6IGZ1bmN0aW9uIGNhcnRUb3RhbExlbmdodCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2FydC5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VyVmFsKSB7CiAgICAgICAgcmV0dXJuIGFjYyArPSBjdXJWYWwucXVhbnRpdHk7CiAgICAgIH0sIDApOwogICAgfSwKICAgIGNhcnRUb3RhbFByaWNlOiBmdW5jdGlvbiBjYXJ0VG90YWxQcmljZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2FydC5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VyVmFsKSB7CiAgICAgICAgcmV0dXJuIGFjYyArPSBjdXJWYWwucHJvZHVjdC5wcmljZSAqIGN1clZhbC5xdWFudGl0eTsKICAgICAgfSwgMCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\leoch\\Desktop\\Cours\\G4\\projets\\ecommerce_g4\\ecommerce\\ecommerce_front\\src\\views\\Checkout.vue"],"names":[],"mappings":";AAuGA,OAAO,KAAP,MAAkB,OAAlB;AACA,eAAe;AACb,EAAA,IAAI,EAAE,UADO;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,IAAI,EAAE;AACJ,QAAA,KAAK,EAAE;AADH,OADD;AAIL,MAAA,MAAM,EAAE,EAJH;AAKL,MAAA,IAAI,EAAE,EALD;AAML,MAAA,UAAU,EAAE,EANP;AAOL,MAAA,SAAS,EAAE,EAPN;AAQL,MAAA,KAAK,EAAE,EARF;AASL,MAAA,KAAK,EAAE,EATF;AAUL,MAAA,MAAM,EAAE,EAVH;AAWL,MAAA,OAAO,EAAE,EAXJ;AAYL,MAAA,KAAK,EAAE,EAZF;AAaL,MAAA,MAAM,EAAE;AAbH,KAAP;AAeD,GAlBY;AAmBb,EAAA,OAnBa,qBAmBH;AACR,IAAA,QAAQ,CAAC,KAAT,GAAiB,2BAAjB;AACA,SAAK,IAAL,GAAY,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAA9B;AACD,GAtBY;AAuBb,EAAA,OAAO,EAAE;AACP,IAAA,YADO,wBACM,IADN,EACY;AACjB,aAAO,IAAI,CAAC,QAAL,GAAgB,IAAI,CAAC,OAAL,CAAa,KAApC;AACD,KAHM;AAIP,IAAA,UAJO,wBAIM;AACX,WAAK,MAAL,GAAc,EAAd;;AAEA,UAAI,KAAK,UAAL,KAAoB,EAAxB,EAA4B;AAC1B,aAAK,MAAL,CAAY,IAAZ,CAAiB,yBAAjB;AACF;;AACA,UAAI,KAAK,SAAL,KAAmB,EAAvB,EAA2B;AACzB,aAAK,MAAL,CAAY,IAAZ,CAAiB,4BAAjB;AACF;;AACA,UAAI,KAAK,KAAL,KAAe,EAAnB,EAAuB;AACrB,aAAK,MAAL,CAAY,IAAZ,CAAiB,0BAAjB;AACF;;AACA,UAAI,KAAK,KAAL,KAAe,EAAnB,EAAuB;AACrB,aAAK,MAAL,CAAY,IAAZ,CAAiB,yCAAjB;AACF;;AACA,UAAI,KAAK,MAAL,KAAgB,EAApB,EAAwB;AACtB,aAAK,MAAL,CAAY,IAAZ,CAAiB,gCAAjB;AACF;;AACA,UAAI,KAAK,OAAL,KAAiB,EAArB,EAAyB;AACvB,aAAK,MAAL,CAAY,IAAZ,CAAiB,iCAAjB;AACF;;AACA,UAAI,KAAK,KAAL,KAAe,EAAnB,EAAuB;AACrB,aAAK,MAAL,CAAY,IAAZ,CAAiB,+BAAjB;AACF;AACD;AA5BM,GAvBI;AAqDb,EAAA,QAAQ,EAAE;AACR,IAAA,eADQ,6BACU;AAChB,aAAO,KAAK,IAAL,CAAU,KAAV,CAAgB,MAAhB,CAAuB,UAAC,GAAD,EAAM,MAAN,EAAiB;AAC7C,eAAQ,GAAE,IAAK,MAAM,CAAC,QAAtB;AACD,OAFM,EAEJ,CAFI,CAAP;AAGD,KALO;AAMR,IAAA,cANQ,4BAMS;AACf,aAAO,KAAK,IAAL,CAAU,KAAV,CAAgB,MAAhB,CAAuB,UAAC,GAAD,EAAM,MAAN,EAAiB;AAC7C,eAAQ,GAAE,IAAK,MAAM,CAAC,OAAP,CAAe,KAAf,GAAuB,MAAM,CAAC,QAA7C;AACD,OAFM,EAEJ,CAFI,CAAP;AAGD;AAVO;AArDG,CAAf","sourcesContent":["<template>\r\n  <div class=\"page-checkout\">\r\n    <div class=\"columns is-multiline\">\r\n      <div class=\"column is-12\">\r\n        <h1 class=\"title\">Paiement</h1>\r\n      </div>\r\n      <div class=\"column is-12 box\">\r\n        <table class=\"table is-fullwidth\">\r\n          <thead>\r\n            <tr>\r\n              <th>Produit</th>\r\n              <th>Prix</th>\r\n              <th>Quantité</th>\r\n              <th>Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"item in cart.items\" v-bind:key=\"item.product.id\">\r\n              <td>{{ item.product.name }}</td>\r\n              <td>{{ item.product.price }}</td>\r\n              <td>{{ item.quantity }}</td>\r\n              <td>${{ getItemTotal(item).toFixed(2) }}</td>\r\n            </tr>\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td colspan=\"2\">Total</td>\r\n              <td>{{ cartTotalLength }}</td>\r\n              <td>${{ cartTotalPrice.toFixed(2) }}</td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n      </div>\r\n      <div class=\"column is-12 box\">\r\n        <h2 class=\"subtitle\">Détails des achats</h2>\r\n        <p class=\"has-text-grey mb-4\">* Tous les champs sont requis</p>\r\n\r\n        <div class=\"columns is-multiline\">\r\n          <div class=\"column is-6\">\r\n            <div class=\"field\">\r\n              <label>Prénom*</label>\r\n              <div class=\"control\">\r\n                <input type=\"text\" class=\"input\" v-model=\"first_name\" />\r\n              </div>\r\n            </div>\r\n            <div class=\"field\">\r\n              <label>Nom*</label>\r\n              <div class=\"control\">\r\n                <input type=\"text\" class=\"input\" v-model=\"last_name\" />\r\n              </div>\r\n            </div>\r\n            <div class=\"field\">\r\n              <label>E-mail*</label>\r\n              <div class=\"control\">\r\n                <input type=\"email\" class=\"input\" v-model=\"email\" />\r\n              </div>\r\n            </div>\r\n            <div class=\"field\">\r\n              <label>Téléphone*</label>\r\n              <div class=\"control\">\r\n                <input type=\"text\" class=\"input\" v-model=\"phone\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"column is-6\">\r\n            <div class=\"field\">\r\n              <label>Addresse*</label>\r\n              <div class=\"control\">\r\n                <input type=\"text\" class=\"input\" v-model=\"adress\" />\r\n              </div>\r\n            </div>\r\n            <div class=\"field\">\r\n              <label>Zip Code*</label>\r\n              <div class=\"control\">\r\n                <input type=\"text\" class=\"input\" v-model=\"zipcode\" />\r\n              </div>\r\n            </div>\r\n            <div class=\"field\">\r\n              <label>Place*</label>\r\n              <div class=\"control\">\r\n                <input type=\"text\" class=\"input\" v-model=\"place\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        \r\n          <hr />\r\n          <div id=\"card-element\" class=\"mb-5\"></div>\r\n          <template v-if=\"cartTotalLenght\">\r\n            <hr>\r\n            <button class=\"button is-dark\" @click=\"submitForm\">\r\n              Payer avec Stripe\r\n            </button>\r\n          </template>\r\n            <div class=\"notification is-danger mt-4\" v-if=\"errors.length\">\r\n            <p v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"Checkout\",\r\n  data() {\r\n    return {\r\n      cart: {\r\n        items: [],\r\n      },\r\n      stripe: {},\r\n      card: {},\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      adress: \"\",\r\n      zipcode: \"\",\r\n      place: \"\",\r\n      errors: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    document.title = \"Se Digitaliser | Paiement\";\r\n    this.cart = this.$store.state.cart;\r\n  },\r\n  methods: {\r\n    getItemTotal(item) {\r\n      return item.quantity * item.product.price;\r\n    },\r\n    submitForm() {\r\n      this.errors = [];\r\n\r\n      if (this.first_name === \"\") {\r\n        this.errors.push(\"Le nom doit être rempli\");\r\n      }\r\n      if (this.last_name === \"\") {\r\n        this.errors.push(\"Le prénom doit être rempli\");\r\n      }\r\n      if (this.email === \"\") {\r\n        this.errors.push(\"L'email doit être rempli\");\r\n      }\r\n      if (this.phone === \"\") {\r\n        this.errors.push(\"Le numéro de téléphone doit être rempli\");\r\n      }\r\n      if (this.adress === \"\") {\r\n        this.errors.push(\"L'adresse doit être renseignée\");\r\n      }\r\n      if (this.zipcode === \"\") {\r\n        this.errors.push(\"Le zip code doit être renseigné\");\r\n      }\r\n      if (this.place === \"\") {\r\n        this.errors.push(\"La ville doit être renseignée\");\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    cartTotalLenght() {\r\n      return this.cart.items.reduce((acc, curVal) => {\r\n        return (acc += curVal.quantity);\r\n      }, 0);\r\n    },\r\n    cartTotalPrice() {\r\n      return this.cart.items.reduce((acc, curVal) => {\r\n        return (acc += curVal.product.price * curVal.quantity);\r\n      }, 0);\r\n    },\r\n  },\r\n};\r\n</script>"],"sourceRoot":""}]}